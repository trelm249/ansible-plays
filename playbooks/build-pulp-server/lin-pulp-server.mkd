#Setup a Pulp server  
> For this document we are using a CentOS 7 server to host pulp. The process can be adapted to RHEL or Fedora. We assume that this is a clean Pulp install. The server will also run the Admin manager.  

**Open the host firewall ports**  
`sudo firewall-cmd --permanent --zone=work --add-service=http --add-service=https`  
`sudo firewall-cmd --permanent --zone=work --add-port=5671/tcp --add-port=5672/tcp`
`sudo systemctl restart firewalld`  

**Add the EPEL Repository**  
`sudo yum install http://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm`

**Pulp uses the MongoDB databse**
`sudo yum install mongodb-server`  
`sudo systemctl enable mongod`  
`sudo systemctl start mongod`  

**Pulp needs a message bus as well. Qpid is default**  
> We will set this up with the default anonymous authentication. Qpid can use SASL. Please reference the qpid documentation if desired. All messaging is local to the server in our case.  

`sudo yum install qpid-cpp-server qpid-cpp-server-linearstore`
`sudo systemctl enable qpidd`  
`sudo systemctl start qpidd`  

**Install the Pulp related packages**  

For Centos/RHEL install the repo file.  
`sudo curl https://repos.fedorapeople.org/repos/pulp/pulp/rhel-pulp.repo -o /etc/yum.repos.d/rhel-pulp.repo`  

For Fedora, the packages are in the regular distro.  

`sudo yum install pulp-server python-gofer-qpid python2-qpid qpid-tools pulp-rpm-plugins pulp-docker-plugins`  

**Generate a SSL certs for your new pulp server**
> For our practice lab, we will go with self-signed.  
`sudo pulp-gen-key-pair`  
`sudo pulp-gen-ca-certificate`  

**Prior to starting Apache or the Pulp service, initialize the database**  
`sudo -u apache pulp-manage-db`  

**Apache considerations**  
> Pulp best practice is that the web server only serves Pulp. Also, use tls 1.2 are better for communication in mod_ssl. Practice secure web connectivity for clients.  
`SSLProtocol -all +TLSv1.2` 
`sudo systemctl enable httpd`  
`sudo systemctl start httpd`

**Start the Celery distributed task system**  
`sudo systemctl enable pulp_workers`  
`sudo systemctl start pulp_workers`  

**Start Celerybeat and Resource Manager**
`sudo systemctl enable pulp_celerybeat`  
`sudo systemctl start pulp_celerybeat`  
`sudo systemctl enable pulp_resource_manager`  
`sudo systemctl start pulp_resource_manager`  

## Setup Pulp Admin Client on the server  
> The admin client is also installed on the pulp server for management purposes.  
`sudo yum install pulp-admin-client pulp-rpm-admin-extensions pulp-docker-admin-extensions`  

Update the /etc/pulp/admin/admin.conf with -  
`host = localhost.localhost`  

